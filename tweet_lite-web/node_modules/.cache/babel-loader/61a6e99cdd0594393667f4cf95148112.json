{"ast":null,"code":"import _toConsumableArray from\"F:/Study/010 Programming learning/@React Js/TweetLite/tweet_lite-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"F:/Study/010 Programming learning/@React Js/TweetLite/tweet_lite-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{loadTweets}from\"../lookup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function TweetsComponent(props){var textAreaRef=/*#__PURE__*/React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newTweets=_useState2[0],setNewTweets=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var newVal=textAreaRef.current.value;console.log(newVal);var tempNewTweets=_toConsumableArray(newTweets);tempNewTweets.unshift({content:newVal,likes:0,id:1234});setNewTweets(tempNewTweets);textAreaRef.current.value=\"\";};return/*#__PURE__*/_jsxs(\"div\",{className:props.className,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success my-3\",children:\"Tweet\"})]})}),/*#__PURE__*/_jsx(TweetsList,{newTweets:newTweets})]});}export function TweetsList(props){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tweetsInit=_useState4[0],setTweetsInit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tweets=_useState6[0],setTweets=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),tweetsDidSet=_useState8[0],setTweetsDidSet=_useState8[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){if(tweetsDidSet===false){var myCallBack=function myCallBack(response,status){if(status===200){setTweetsInit(response);setTweetsDidSet(true);console.log(\"reload\");}else{alert(\"There was an error\");}};loadTweets(myCallBack);}},[tweetsInit,tweetsDidSet,setTweetsDidSet]);return tweets.map(function(item,index){return/*#__PURE__*/_jsx(Tweet,{tweet:item,className:\"my-5 py-5 border bg-white text-dark\"},\"\".concat(index,\"-item.id\"));});}export function ActionBtn(props){var tweet=props.tweet,action=props.action;var _useState9=useState(tweet.likes?tweet.likes:0),_useState10=_slicedToArray(_useState9,2),likes=_useState10[0],setLikes=_useState10[1];var _useState11=useState(tweet.userLike===true?true:false),_useState12=_slicedToArray(_useState11,2),userLike=_useState12[0],setUserLike=_useState12[1];var className=props.className?props.className:\"btn btn-success btn-sm\";var actionDisplay=action.display?action.display:\"Action\";var handleClick=function handleClick(event){event.preventDefault();if(action.type===\"like\"){if(userLike===true){setLikes(likes-1);setUserLike(false);}else{setLikes(likes+1);setUserLike(true);}}};var display=action.type===\"like\"?\"\".concat(likes,\" \").concat(actionDisplay):actionDisplay;return/*#__PURE__*/_jsx(\"button\",{className:className,onClick:handleClick,children:display});}export function Tweet(props){var tweet=props.tweet;var className=props.className?props.className:\"col-10 mx-auto col-md-6\";return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[/*#__PURE__*/_jsxs(\"p\",{children:[tweet.id,\" - \",tweet.content]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn btn-group\",children:[/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:\"like\",display:\"Like\"}}),/*#__PURE__*/_jsx(ActionBtn,{tweet:tweet,action:{type:\"unlike\",display:\"UnLike\"}})]})]});}","map":{"version":3,"sources":["F:/Study/010 Programming learning/@React Js/TweetLite/tweet_lite-web/src/tweets/components.js"],"names":["React","useState","useEffect","loadTweets","TweetsComponent","props","textAreaRef","createRef","newTweets","setNewTweets","handleSubmit","event","preventDefault","newVal","current","value","console","log","tempNewTweets","unshift","content","likes","id","className","TweetsList","tweetsInit","setTweetsInit","tweets","setTweets","tweetsDidSet","setTweetsDidSet","final","concat","length","myCallBack","response","status","alert","map","item","index","ActionBtn","tweet","action","setLikes","userLike","setUserLike","actionDisplay","display","handleClick","type","Tweet"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { loadTweets } from \"../lookup\";\r\n\r\nexport function TweetsComponent(props) {\r\n\tconst textAreaRef = React.createRef();\r\n\tconst [newTweets, setNewTweets] = useState([]);\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst newVal = textAreaRef.current.value;\r\n\t\tconsole.log(newVal);\r\n\t\tlet tempNewTweets = [...newTweets];\r\n\t\ttempNewTweets.unshift({\r\n\t\t\tcontent: newVal,\r\n\t\t\tlikes: 0,\r\n\t\t\tid: 1234,\r\n\t\t});\r\n\t\tsetNewTweets(tempNewTweets);\r\n\t\ttextAreaRef.current.value = \"\";\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={props.className}>\r\n\t\t\t<div className=\"col-12 mb-3\">\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<textarea ref={textAreaRef} required={true} className=\"form-control\"></textarea>\r\n\t\t\t\t\t<button type=\"submit\" className=\"btn btn-success my-3\">\r\n\t\t\t\t\t\tTweet\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<TweetsList newTweets={newTweets} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function TweetsList(props) {\r\n\tconst [tweetsInit, setTweetsInit] = useState([]);\r\n\tconst [tweets, setTweets] = useState([]);\r\n\tconst [tweetsDidSet, setTweetsDidSet] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst final = [...props.newTweets].concat(tweetsInit);\r\n\t\tif (final.length !== tweets.length) {\r\n\t\t\tsetTweets(final);\r\n\t\t}\r\n\t}, [props.newTweets, tweets, tweetsInit]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (tweetsDidSet === false) {\r\n\t\t\tconst myCallBack = (response, status) => {\r\n\t\t\t\tif (status === 200) {\r\n\t\t\t\t\tsetTweetsInit(response);\r\n\t\t\t\t\tsetTweetsDidSet(true);\r\n\t\t\t\t\tconsole.log(\"reload\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"There was an error\");\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tloadTweets(myCallBack);\r\n\t\t}\r\n\t}, [tweetsInit, tweetsDidSet, setTweetsDidSet]);\r\n\r\n\treturn tweets.map((item, index) => {\r\n\t\treturn (\r\n\t\t\t<Tweet\r\n\t\t\t\ttweet={item}\r\n\t\t\t\tkey={`${index}-item.id`}\r\n\t\t\t\tclassName=\"my-5 py-5 border bg-white text-dark\"\r\n\t\t\t/>\r\n\t\t);\r\n\t});\r\n}\r\n\r\nexport function ActionBtn(props) {\r\n\tconst { tweet, action } = props;\r\n\tconst [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0);\r\n\tconst [userLike, setUserLike] = useState(tweet.userLike === true ? true : false);\r\n\tconst className = props.className ? props.className : \"btn btn-success btn-sm\";\r\n\tconst actionDisplay = action.display ? action.display : \"Action\";\r\n\r\n\tconst handleClick = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif (action.type === \"like\") {\r\n\t\t\tif (userLike === true) {\r\n\t\t\t\tsetLikes(likes - 1);\r\n\t\t\t\tsetUserLike(false);\r\n\t\t\t} else {\r\n\t\t\t\tsetLikes(likes + 1);\r\n\t\t\t\tsetUserLike(true);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tconst display = action.type === \"like\" ? `${likes} ${actionDisplay}` : actionDisplay;\r\n\r\n\treturn (\r\n\t\t<button className={className} onClick={handleClick}>\r\n\t\t\t{display}\r\n\t\t</button>\r\n\t);\r\n}\r\n\r\nexport function Tweet(props) {\r\n\tconst { tweet } = props;\r\n\tconst className = props.className ? props.className : \"col-10 mx-auto col-md-6\";\r\n\r\n\treturn (\r\n\t\t<div className={className}>\r\n\t\t\t<p>\r\n\t\t\t\t{tweet.id} - {tweet.content}\r\n\t\t\t</p>\r\n\t\t\t<div className=\"btn btn-group\">\r\n\t\t\t\t<ActionBtn tweet={tweet} action={{ type: \"like\", display: \"Like\" }} />\r\n\t\t\t\t<ActionBtn tweet={tweet} action={{ type: \"unlike\", display: \"UnLike\" }} />\r\n\t\t\t\t{/* <ActionBtn tweet={tweet} action={{ type: \"retweet\", display: \"Retweet\" }} /> */}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}